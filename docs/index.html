<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OXEENTRUST - Privacy Awareness Tool</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08);
  --color-bg-2: rgba(245, 158, 11, 0.08);
  --color-bg-3: rgba(34, 197, 94, 0.08);
  --color-bg-4: rgba(239, 68, 68, 0.08);
  --color-bg-5: rgba(147, 51, 234, 0.08);
  --color-bg-6: rgba(249, 115, 22, 0.08);
  --color-bg-7: rgba(236, 72, 153, 0.08);
  --color-bg-8: rgba(6, 182, 212, 0.08);

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-4: 4px;
  --space-8: 8px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;
    --color-bg-1: rgba(29, 78, 216, 0.15);
    --color-bg-2: rgba(180, 83, 9, 0.15);
    --color-bg-3: rgba(21, 128, 61, 0.15);
    --color-bg-4: rgba(185, 28, 28, 0.15);
    --color-bg-5: rgba(107, 33, 168, 0.15);
    --color-bg-6: rgba(194, 65, 12, 0.15);
    --color-bg-7: rgba(190, 24, 93, 0.15);
    --color-bg-8: rgba(8, 145, 178, 0.15);
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('fonts/FKGroteskNeue.woff2') format('woff2');
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-family-base);
  background-color: var(--color-background);
  color: var(--color-text);
  line-height: var(--line-height-normal);
  -webkit-font-smoothing: antialiased;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-24);
}

.header {
  text-align: center;
  margin-bottom: var(--space-32);
  padding: var(--space-32) var(--space-24);
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
}

.logo {
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin-bottom: var(--space-16);
  letter-spacing: var(--letter-spacing-tight);
}

.subtitle {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  margin-bottom: var(--space-24);
}

.disclaimer {
  background: var(--color-bg-2);
  padding: var(--space-16);
  border-radius: var(--radius-base);
  border-left: 4px solid var(--color-warning);
  margin-bottom: var(--space-24);
  font-size: var(--font-size-sm);
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-12) var(--space-32);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
}

.btn-primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn-primary:hover {
  background: var(--color-primary-hover);
}

.btn-secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn-secondary:hover {
  background: var(--color-secondary-hover);
}

.permissions-section,
.data-section {
  display: none;
}

.permissions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-16);
  margin-bottom: var(--space-24);
}

.permission-card {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-16);
  box-shadow: var(--shadow-sm);
}

.permission-name {
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-8);
  font-size: var(--font-size-base);
}

.permission-status {
  display: inline-block;
  padding: var(--space-4) var(--space-12);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.status-granted {
  background: rgba(var(--color-success-rgb), 0.15);
  color: var(--color-success);
  border: 1px solid rgba(var(--color-success-rgb), 0.25);
}

.status-denied {
  background: rgba(var(--color-error-rgb), 0.15);
  color: var(--color-error);
  border: 1px solid rgba(var(--color-error-rgb), 0.25);
}

.status-pending {
  background: rgba(var(--color-warning-rgb), 0.15);
  color: var(--color-warning);
  border: 1px solid rgba(var(--color-warning-rgb), 0.25);
}

.status-unsupported {
  background: rgba(var(--color-info-rgb), 0.15);
  color: var(--color-info);
  border: 1px solid rgba(var(--color-info-rgb), 0.25);
}

.tabs {
  display: flex;
  gap: var(--space-8);
  margin-bottom: var(--space-24);
  flex-wrap: wrap;
  border-bottom: 1px solid var(--color-border);
}

.tab {
  padding: var(--space-12) var(--space-20);
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  transition: all var(--duration-fast) var(--ease-standard);
}

.tab:hover {
  color: var(--color-text);
}

.tab.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

.data-card {
  background: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
  margin-bottom: var(--space-16);
}

.data-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-16);
}

.data-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

.data-content {
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  padding: var(--space-16);
  font-family: var(--font-family-mono);
  font-size: var(--font-size-sm);
  max-height: 400px;
  overflow-y: auto;
  white-space: pre-wrap;
  word-break: break-all;
}

.warning-box {
  background: rgba(var(--color-error-rgb), 0.1);
  border: 1px solid var(--color-error);
  border-radius: var(--radius-base);
  padding: var(--space-16);
  margin-bottom: var(--space-16);
}

.warning-title {
  font-weight: var(--font-weight-semibold);
  color: var(--color-error);
  margin-bottom: var(--space-8);
  display: flex;
  align-items: center;
  gap: var(--space-8);
}

.info-box {
  background: var(--color-bg-1);
  border: 1px solid var(--color-primary);
  border-radius: var(--radius-base);
  padding: var(--space-16);
  margin-top: var(--space-16);
}

.info-title {
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-8);
  color: var(--color-primary);
}

.info-list {
  list-style-position: inside;
  font-size: var(--font-size-sm);
  line-height: 1.8;
}

.export-section {
  display: flex;
  gap: var(--space-12);
  margin-top: var(--space-24);
  flex-wrap: wrap;
}

.hidden {
  display: none !important;
}

.data-stats {
  display: flex;
  gap: var(--space-16);
  margin-bottom: var(--space-16);
  flex-wrap: wrap;
}

.stat-item {
  background: var(--color-bg-1);
  padding: var(--space-12) var(--space-16);
  border-radius: var(--radius-base);
  border: 1px solid var(--color-card-border);
}

.stat-label {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.stat-value {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-primary);
}

.loading {
  text-align: center;
  padding: var(--space-32);
}

.spinner {
  border: 3px solid var(--color-secondary);
  border-top: 3px solid var(--color-primary);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
  margin: 0 auto var(--space-16);
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.empty-state {
  text-align: center;
  padding: var(--space-32);
  color: var(--color-text-secondary);
}

.section-description {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin-bottom: var(--space-12);
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Section -->
        <div id="landingSection">
            <div class="header">
                <div class="logo">üîí OXEENTRUST</div>
                <div class="subtitle">Privacy Awareness & Educational Tool</div>
                <div class="disclaimer">
                    <strong>‚ö†Ô∏è Educational Disclaimer:</strong> This is an educational tool to raise awareness about browser data collection. It demonstrates what data is accessible to websites and how to protect your privacy. All data collected stays in your browser and is never transmitted to any server.
                </div>
                <button class="btn btn-primary" onclick="startAudit()">üîç Start Privacy Audit</button>
            </div>
        </div>

        <!-- Permissions Section -->
        <div id="permissionsSection" class="permissions-section">
            <h2 style="margin-bottom: var(--space-24);">Requesting Browser Permissions...</h2>
            <div class="permissions-grid" id="permissionsGrid"></div>
            <div style="text-align: center; margin-top: var(--space-24);">
                <button class="btn btn-primary" onclick="collectData()" id="continueBtn" disabled="">Continue to Data Collection</button>
            </div>
        </div>

        <!-- Data Collection Section -->
        <div id="dataSection" class="data-section">
            <div class="loading" id="loadingIndicator">
                <div class="spinner"></div>
                <p>Collecting browser data...</p>
            </div>

            <div id="dataContent" class="hidden">
                <div class="data-header">
                    <h2>Collected Data Overview</h2>
                </div>

                <div class="data-stats" id="dataStats"></div>

                <div class="tabs" id="tabsContainer"></div>
                <div id="tabContent"></div>

                <div class="export-section">
                    <button class="btn btn-primary" onclick="downloadReport()">üì• Download Full Report (JSON)</button>
                    <button class="btn btn-secondary" onclick="copyReport()">üìã Copy Summary</button>
                </div>

                <div class="info-box">
                    <div class="info-title">üõ°Ô∏è Privacy Protection Recommendations:</div>
                    <ul class="info-list">
                        <li>Clear cookies regularly to remove tracking data</li>
                        <li>Use private/incognito browsing mode for sensitive activities</li>
                        <li>Disable third-party cookies in browser settings</li>
                        <li>Review and manage browser permissions for each website</li>
                        <li>Use a VPN for additional privacy and security</li>
                        <li>Keep your browser updated to the latest version</li>
                        <li>Use browser extensions that block trackers and ads</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state management (using in-memory variables instead of localStorage)
        const appState = {
            permissions: {},
            collectedData: {},
            currentTab: 'browser'
        };

        const permissionsList = [
            { name: 'Geolocation', type: 'geolocation', icon: 'üìç' },
            { name: 'Camera', type: 'camera', icon: 'üì∑' },
            { name: 'Microphone', type: 'microphone', icon: 'üé§' },
            { name: 'Notifications', type: 'notifications', icon: 'üîî' },
            { name: 'Clipboard', type: 'clipboard', icon: 'üìã' },
            { name: 'Device Motion', type: 'motion', icon: 'üì±' }
        ];

        function startAudit() {
            document.getElementById('landingSection').style.display = 'none';
            document.getElementById('permissionsSection').style.display = 'block';
            requestPermissions();
        }

        async function requestPermissions() {
            const grid = document.getElementById('permissionsGrid');
            
            for (const perm of permissionsList) {
                const card = document.createElement('div');
                card.className = 'permission-card';
                card.id = `perm-${perm.type}`;
                card.innerHTML = `
                    <div class="permission-name">${perm.icon} ${perm.name}</div>
                    <div class="permission-status status-pending">Requesting...</div>
                `;
                grid.appendChild(card);
            }

            // Request each permission with delay for better UX
            for (const perm of permissionsList) {
                await new Promise(resolve => setTimeout(resolve, 500));
                await requestPermission(perm.type);
            }

            document.getElementById('continueBtn').disabled = false;
        }

        async function requestPermission(type) {
            const statusEl = document.querySelector(`#perm-${type} .permission-status`);
            
            try {
                switch(type) {
                    case 'geolocation':
                        if ('geolocation' in navigator) {
                            navigator.geolocation.getCurrentPosition(
                                () => updatePermissionStatus(type, 'granted'),
                                () => updatePermissionStatus(type, 'denied')
                            );
                        } else {
                            updatePermissionStatus(type, 'unsupported');
                        }
                        break;
                    
                    case 'camera':
                    case 'microphone':
                        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                            try {
                                const constraints = type === 'camera' ? { video: true } : { audio: true };
                                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                                stream.getTracks().forEach(track => track.stop());
                                updatePermissionStatus(type, 'granted');
                            } catch (e) {
                                updatePermissionStatus(type, 'denied');
                            }
                        } else {
                            updatePermissionStatus(type, 'unsupported');
                        }
                        break;
                    
                    case 'notifications':
                        if ('Notification' in window) {
                            const result = await Notification.requestPermission();
                            updatePermissionStatus(type, result === 'granted' ? 'granted' : 'denied');
                        } else {
                            updatePermissionStatus(type, 'unsupported');
                        }
                        break;
                    
                    case 'clipboard':
                        if (navigator.clipboard && navigator.clipboard.readText) {
                            try {
                                await navigator.clipboard.readText();
                                updatePermissionStatus(type, 'granted');
                            } catch (e) {
                                updatePermissionStatus(type, 'denied');
                            }
                        } else {
                            updatePermissionStatus(type, 'unsupported');
                        }
                        break;
                    
                    case 'motion':
                        if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                            try {
                                const result = await DeviceMotionEvent.requestPermission();
                                updatePermissionStatus(type, result === 'granted' ? 'granted' : 'denied');
                            } catch (e) {
                                updatePermissionStatus(type, 'denied');
                            }
                        } else if ('ondevicemotion' in window) {
                            updatePermissionStatus(type, 'granted');
                        } else {
                            updatePermissionStatus(type, 'unsupported');
                        }
                        break;
                }
            } catch (error) {
                updatePermissionStatus(type, 'denied');
            }
        }

        function updatePermissionStatus(type, status) {
            appState.permissions[type] = status;
            const statusEl = document.querySelector(`#perm-${type} .permission-status`);
            if (statusEl) {
                statusEl.className = `permission-status status-${status}`;
                statusEl.textContent = status.charAt(0).toUpperCase() + status.slice(1);
            }
        }

        async function collectData() {
            document.getElementById('permissionsSection').style.display = 'none';
            document.getElementById('dataSection').style.display = 'block';

            // Simulate collection delay
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Collect all data
            appState.collectedData = {
                browserInfo: collectBrowserInfo(),
                deviceInfo: collectDeviceInfo(),
                locationData: await collectLocationData(),
                historyData: collectHistoryData(),
                pluginsInfo: collectPluginsInfo()
            };

            // Note: Cannot access localStorage, sessionStorage, or cookies in sandboxed environment
            // These will be shown as restricted

            displayCollectedData();
        }

        function collectBrowserInfo() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages,
                cookieEnabled: navigator.cookieEnabled,
                doNotTrack: navigator.doNotTrack,
                onLine: navigator.onLine,
                vendor: navigator.vendor,
                vendorSub: navigator.vendorSub,
                hardwareConcurrency: navigator.hardwareConcurrency,
                maxTouchPoints: navigator.maxTouchPoints,
                pdfViewerEnabled: navigator.pdfViewerEnabled
            };
        }

        function collectDeviceInfo() {
            return {
                screenWidth: screen.width,
                screenHeight: screen.height,
                screenAvailWidth: screen.availWidth,
                screenAvailHeight: screen.availHeight,
                screenColorDepth: screen.colorDepth,
                screenPixelDepth: screen.pixelDepth,
                devicePixelRatio: window.devicePixelRatio,
                innerWidth: window.innerWidth,
                innerHeight: window.innerHeight,
                outerWidth: window.outerWidth,
                outerHeight: window.outerHeight,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                timezoneOffset: new Date().getTimezoneOffset()
            };
        }

        async function collectLocationData() {
            if (appState.permissions.geolocation === 'granted') {
                return new Promise((resolve) => {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            resolve({
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                                accuracy: position.coords.accuracy,
                                altitude: position.coords.altitude,
                                altitudeAccuracy: position.coords.altitudeAccuracy,
                                heading: position.coords.heading,
                                speed: position.coords.speed,
                                timestamp: new Date(position.timestamp).toISOString()
                            });
                        },
                        () => resolve({ error: 'Location access denied or unavailable' })
                    );
                });
            }
            return { status: 'Permission not granted' };
        }

        function collectHistoryData() {
            return {
                url: window.location.href,
                protocol: window.location.protocol,
                hostname: window.location.hostname,
                port: window.location.port,
                pathname: window.location.pathname,
                search: window.location.search,
                hash: window.location.hash,
                referrer: document.referrer || 'Direct visit',
                documentTitle: document.title,
                historyLength: window.history.length
            };
        }

        function collectPluginsInfo() {
            const plugins = [];
            for (let i = 0; i < navigator.plugins.length; i++) {
                const plugin = navigator.plugins[i];
                plugins.push({
                    name: plugin.name,
                    description: plugin.description,
                    filename: plugin.filename
                });
            }
            return {
                count: plugins.length,
                plugins: plugins.length > 0 ? plugins : 'No plugins detected or plugin enumeration blocked'
            };
        }

        function displayCollectedData() {
            document.getElementById('loadingIndicator').classList.add('hidden');
            document.getElementById('dataContent').classList.remove('hidden');

            // Display statistics
            displayStats();

            // Create tabs
            const tabs = [
                { id: 'browser', name: 'Browser Info', icon: 'üåê' },
                { id: 'device', name: 'Device Info', icon: 'üíª' },
                { id: 'location', name: 'Location', icon: 'üìç' },
                { id: 'history', name: 'Navigation', icon: 'üîó' },
                { id: 'plugins', name: 'Plugins', icon: 'üîå' },
                { id: 'storage', name: 'Storage (Restricted)', icon: 'üíæ' }
            ];

            const tabsContainer = document.getElementById('tabsContainer');
            const tabContent = document.getElementById('tabContent');

            tabs.forEach((tab, index) => {
                const tabBtn = document.createElement('button');
                tabBtn.className = `tab ${index === 0 ? 'active' : ''}`;
                tabBtn.textContent = `${tab.icon} ${tab.name}`;
                tabBtn.onclick = () => switchTab(tab.id);
                tabsContainer.appendChild(tabBtn);

                const content = document.createElement('div');
                content.className = `tab-content ${index === 0 ? 'active' : ''}`;
                content.id = `tab-${tab.id}`;
                content.innerHTML = generateTabContent(tab.id);
                tabContent.appendChild(content);
            });
        }

        function displayStats() {
            const stats = [
                { label: 'Permissions Requested', value: permissionsList.length },
                { label: 'Granted', value: Object.values(appState.permissions).filter(p => p === 'granted').length },
                { label: 'Data Categories', value: Object.keys(appState.collectedData).length },
                { label: 'Browser Features', value: Object.keys(appState.collectedData.browserInfo || {}).length }
            ];

            const statsContainer = document.getElementById('dataStats');
            stats.forEach(stat => {
                const statEl = document.createElement('div');
                statEl.className = 'stat-item';
                statEl.innerHTML = `
                    <div class="stat-label">${stat.label}</div>
                    <div class="stat-value">${stat.value}</div>
                `;
                statsContainer.appendChild(statEl);
            });
        }

        function generateTabContent(tabId) {
            let content = '';
            let warnings = [];

            switch(tabId) {
                case 'browser':
                    content = `
                        <div class="data-card">
                            <div class="data-header">
                                <div class="data-title">Browser Information</div>
                                <button class="btn btn-secondary" onclick="copyToClipboard('browser')">üìã Copy</button>
                            </div>
                            <p class="section-description">Information about your web browser and its configuration.</p>
                            <div class="data-content">${JSON.stringify(appState.collectedData.browserInfo, null, 2)}</div>
                        </div>
                    `;
                    break;

                case 'device':
                    content = `
                        <div class="data-card">
                            <div class="data-header">
                                <div class="data-title">Device Information</div>
                                <button class="btn btn-secondary" onclick="copyToClipboard('device')">üìã Copy</button>
                            </div>
                            <p class="section-description">Hardware and display information about your device.</p>
                            <div class="data-content">${JSON.stringify(appState.collectedData.deviceInfo, null, 2)}</div>
                        </div>
                    `;
                    warnings.push('Screen resolution and device characteristics can be used for device fingerprinting.');
                    break;

                case 'location':
                    content = `
                        <div class="data-card">
                            <div class="data-header">
                                <div class="data-title">Location Data</div>
                                <button class="btn btn-secondary" onclick="copyToClipboard('location')">üìã Copy</button>
                            </div>
                            <p class="section-description">Your geographical location if permission was granted.</p>
                            <div class="data-content">${JSON.stringify(appState.collectedData.locationData, null, 2)}</div>
                        </div>
                    `;
                    if (appState.permissions.geolocation === 'granted') {
                        warnings.push('‚ö†Ô∏è CRITICAL: Your exact location is being shared. This can reveal your home, workplace, and daily routines.');
                    }
                    break;

                case 'history':
                    content = `
                        <div class="data-card">
                            <div class="data-header">
                                <div class="data-title">Navigation & History Data</div>
                                <button class="btn btn-secondary" onclick="copyToClipboard('history')">üìã Copy</button>
                            </div>
                            <p class="section-description">Current page information and navigation context.</p>
                            <div class="data-content">${JSON.stringify(appState.collectedData.historyData, null, 2)}</div>
                        </div>
                    `;
                    if (appState.collectedData.historyData.referrer && appState.collectedData.historyData.referrer !== 'Direct visit') {
                        warnings.push('Referrer information reveals which site you came from.');
                    }
                    break;

                case 'plugins':
                    content = `
                        <div class="data-card">
                            <div class="data-header">
                                <div class="data-title">Browser Plugins & Extensions</div>
                                <button class="btn btn-secondary" onclick="copyToClipboard('plugins')">üìã Copy</button>
                            </div>
                            <p class="section-description">Installed browser plugins (may be restricted by modern browsers).</p>
                            <div class="data-content">${JSON.stringify(appState.collectedData.pluginsInfo, null, 2)}</div>
                        </div>
                    `;
                    break;

                case 'storage':
                    content = `
                        <div class="warning-box">
                            <div class="warning-title">üîí Storage Access Restricted</div>
                            <p>This application runs in a sandboxed environment and cannot access:</p>
                            <ul style="margin-top: 8px; margin-left: 20px;">
                                <li><strong>Cookies (document.cookie):</strong> Would normally contain session tokens, authentication data, and tracking information</li>
                                <li><strong>LocalStorage:</strong> Persistent data stored by websites, including user preferences and cached content</li>
                                <li><strong>SessionStorage:</strong> Temporary session data that persists during page navigation</li>
                                <li><strong>IndexedDB:</strong> Client-side database that can store large amounts of structured data</li>
                            </ul>
                        </div>
                        <div class="info-box" style="margin-top: 16px;">
                            <div class="info-title">What Websites Can Normally Access:</div>
                            <p style="margin-bottom: 12px;">In a non-sandboxed environment, websites can read and write:</p>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li><strong>All cookies</strong> set by the same domain (including authentication tokens)</li>
                                <li><strong>LocalStorage data</strong> (up to 5-10MB per domain)</li>
                                <li><strong>SessionStorage data</strong> (cleared when tab closes)</li>
                                <li><strong>IndexedDB databases</strong> (can store gigabytes of data)</li>
                                <li><strong>Cache storage</strong> (offline data and resources)</li>
                            </ul>
                            <p style="margin-top: 12px; color: var(--color-error); font-weight: 500;">‚ö†Ô∏è This data can include sensitive information like login sessions, personal preferences, form autofill data, and browsing history.</p>
                        </div>
                    `;
                    break;
            }

            // Add warnings if any
            if (warnings.length > 0) {
                const warningHtml = warnings.map(w => `
                    <div class="warning-box">
                        <div class="warning-title">‚ö†Ô∏è Privacy Warning</div>
                        <p>${w}</p>
                    </div>
                `).join('');
                content = warningHtml + content;
            }

            return content;
        }

        function switchTab(tabId) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`tab-${tabId}`).classList.add('active');

            appState.currentTab = tabId;
        }

        function copyToClipboard(dataType) {
            let data = '';
            switch(dataType) {
                case 'browser':
                    data = JSON.stringify(appState.collectedData.browserInfo, null, 2);
                    break;
                case 'device':
                    data = JSON.stringify(appState.collectedData.deviceInfo, null, 2);
                    break;
                case 'location':
                    data = JSON.stringify(appState.collectedData.locationData, null, 2);
                    break;
                case 'history':
                    data = JSON.stringify(appState.collectedData.historyData, null, 2);
                    break;
                case 'plugins':
                    data = JSON.stringify(appState.collectedData.pluginsInfo, null, 2);
                    break;
            }

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(data).then(() => {
                    alert('Data copied to clipboard!');
                }).catch(() => {
                    fallbackCopy(data);
                });
            } else {
                fallbackCopy(data);
            }
        }

        function fallbackCopy(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                alert('Data copied to clipboard!');
            } catch (err) {
                alert('Failed to copy data. Please copy manually.');
            }
            document.body.removeChild(textarea);
        }

        function downloadReport() {
            const report = {
                timestamp: new Date().toISOString(),
                permissions: appState.permissions,
                data: appState.collectedData
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `oxeentrust-privacy-audit-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyReport() {
            const summary = `
OXEENTRUST Privacy Audit Report
================================
Date: ${new Date().toISOString()}

PERMISSIONS SUMMARY:
${Object.entries(appState.permissions).map(([k, v]) => `- ${k}: ${v}`).join('\n')}

DATA COLLECTED:
- Browser Information: ${Object.keys(appState.collectedData.browserInfo || {}).length} properties
- Device Information: ${Object.keys(appState.collectedData.deviceInfo || {}).length} properties
- Location Data: ${appState.permissions.geolocation === 'granted' ? 'Captured' : 'Not available'}
- Navigation Data: ${Object.keys(appState.collectedData.historyData || {}).length} properties
- Plugins: ${appState.collectedData.pluginsInfo?.count || 0} detected

KEY FINDINGS:
- User Agent: ${appState.collectedData.browserInfo?.userAgent}
- Platform: ${appState.collectedData.browserInfo?.platform}
- Screen Resolution: ${appState.collectedData.deviceInfo?.screenWidth}x${appState.collectedData.deviceInfo?.screenHeight}
- Timezone: ${appState.collectedData.deviceInfo?.timezone}
- Language: ${appState.collectedData.browserInfo?.language}

PRIVACY RECOMMENDATIONS:
- Clear cookies regularly
- Use private browsing mode
- Disable third-party cookies
- Review browser permissions
- Use VPN for additional privacy
            `;

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(summary).then(() => {
                    alert('Summary copied to clipboard!');
                }).catch(() => {
                    fallbackCopy(summary);
                });
            } else {
                fallbackCopy(summary);
            }
        }
    </script>

</body></html>